---
title: "Points de calage : avec un carroyage"
---

::: {.row}

::: {.content .col-xs-12 .col-sm-8 .col-md-9}

* [Création du premier point](#IV31)
* [Quelques astuces pour créer les points suivants](#IV32)

Nous allons créer ici des points de calage, c'est-à-dire attribuer leurs coordonnées à plusieurs points de l'image.

Pour ce faire, nous utiliserons la [première méthode décrite dans la partie IV.1](04_01_principe.html#IV12a) : nous nous baserons sur le carroyage de cette carte pour créer les points de calage (la deuxième méthode sera abordée dans la  [partie IV.6](04_06_calage_autre_couche.html)).

## [Création du premier point](#IV31) {#IV31}

Lancez QGIS ou créez un nouveau projet. **Il est inutile d'ajouter la carte d'Oahu à QGIS** (si vous le faites néanmoins, profitez-en pour observer qu'en l'absence d'informations de localisation pour cette image, QGIS positionne son coin supérieur gauche aux coordonnées (0,0)).

![icône du géoréférenceur](illustrations/tous/4_3_georeferenceur_icone.png)
 Ouvrez la fenêtre du géoréférenceur :
 [Menu Raster → Géoréférencer...

![Menu Raster, Géoréférencer, Géoréférencer...](illustrations/tous/4_3_georeferenceur_menu.png)](#thumb)

[![Fenêtre du géoréférenceur](illustrations/tous/4_3_georeferenceur_fenetre.png)](illustrations/tous/4_3_georeferenceur_fenetre.png)

Il est possible d'afficher le géoréferenceur comme une fenêtre à part ou ancrée. Pour changer de mode, dans la fenêtre du géoréférenceur, **menu Paramètres → Configurer le géoréférenceur...**, cochez ou décochez la case **Afficher la fenêtre de géoréférencement dans la fenêtre principale**.

![icône ouvrir un raster du géoréférenceur](illustrations/tous/4_3_ouvrir_raster_icone.png)Dans cette fenêtre, ajoutez au géoréférenceur l'image à caler en cliquant sur l'icône **Ouvrir un raster**, ou bien
 [menu Fichier → Ouvrir raster...

![Menu Fichier, ouvrir un raster](illustrations/tous/4_3_ouvrir_raster_menu.png)](#thumb)
 .

Sélectionnez la carte de l'île d'Oahu : fichier *[Oahu\_Hawaiian\_Islands\_1906.jpg](donnees/TutoQGIS_04_Georef.zip)*.

Une fenêtre s'ouvre demandant le SCR de l'image ; puisque nous avons décidé de partir du principe que les coordonnées de cette carte était en WGS84, 
 [choisissez ce SCR

![Choix du SCR WGS84 en utilisant le filtre 4326](illustrations/tous/4_3_choix_scr_wgs84.png)](#thumb) 
 .

La carte s'affiche dans la fenêtre du géoréférenceur.

Il s'agit maintenant de renseigner les coordonnées de plusieurs points, en se basant sur les indications de la carte. Vous pouvez par exemple commencer par le point en haut à gauche :

[![emplacement du premier point de calage à créer](illustrations/tous/4_3_premier_point.png)](illustrations/tous/4_3_premier_point.png)

![icône d'ajout de point du géoréférenceur](illustrations/tous/4_3_ajout_point_icone.png)Vérifiez que l'icône **Ajouter un point** soit bien sélectionnée et cliquez à l'intersection des deux lignes du carroyage :

[![Fenêtre de saisie des coordonnées d'un point de calage](illustrations/tous/4_3_ajout_point_fenetre.png)](illustrations/tous/4_3_ajout_point_fenetre.png)

Comment saisir les coordonnées de ce point ?

Ce point est situé aux coordonnées -158° 15' Est (longitude négative car le point est à l'ouest du méridien de Greeenwich) et 21° 40' Nord (latitude positive car le point est au Nord de l'équateur).

QGIS propose de saisir les coordonnées en degrés minutes secondes sous la forme dd mm ss.ss. Ici, nous avons juste des degrés et des minutes : le point a donc pour coordonnées **-158 15** Est et **21 40** Nord.

[![Fenêtre de saisie des coordonnées d'un point de calage, coordonnées remplies](illustrations/tous/4_3_ajout_point_fenetre_rempli.png)](illustrations/tous/4_3_ajout_point_fenetre_rempli.png)

Après avoir saisi les coordonnées, cliquez sur **OK**.

Le point apparaît sous forme d'une ligne dans la table des points de contrôle, sous la carte dans la fenêtre géoréférenceur :

[![Table des points de contrôle : premier point](illustrations/tous/4_3_table_points.png)](illustrations/tous/4_3_table_points.png)

Que signifient les différentes colonnes de cette table ?

* **Visible :** indique si le point sera pris en compte ou non pour le géoréférencement. Permet de ne pas prendre en compte certains points qui semblent apporter trop d'erreurs, tout en les gardant en mémoire.
* **ID :** identifiant du point. Peut aider à repérer de quel point il s'agit sur la carte, dans le fenêtre du géoréférenceur comme dans celle de QGIS.
* **Source X et Y :** coordonnées du point dans l'image non géoréférencée, c'est-à-dire en considérant que le pixel en haut à gauche de l'image a pour coordonnées 0,0.
* **Destination X et Y :** les coordonnées que l'on souhaite faire prendre à ce point, exprimées dans le SCR choisi précédemment. Ces coordonnées sont en degrés décimaux (ici, -158°15' a été converti en -158,25 degrés décimaux).
* **dX (pixels) et dY (pixels) :** la différence entre les coordonnées qu'on souhaiterait voir prendre le point (dstX et dstY) et les coordonnées que prendra effectivement le point après le géoréférencement. En effet, en fonction du type de transformation choisi et du nombre de points de calage, il n'est pas toujours possible de faire coïncider exactement les points avec les coordonnées souhaitées.
* **Résidu (pixels) :** l'erreur associée à ce point, calculée à partir de dX[pixels] et dY[pixels]. Cette erreur est égale à la racine de la somme des carrés de dX[pixels] et dY[pixels], soit :   
√ ( dX[pixels] ² + dY[pixels] ² )

Dans notre table, les colonnes dX[pixels], dY[pixels] et residual[pixels] ne sont pas encore remplies, car nous n'avons pas encore défini le type de **transformation** à effectuer lors du géoréférencement. Cette notion sera abordée dans la [partie suivante](04_04_parametrage.html). En attendant, continuons à ajouter des points de calage pour en avoir par exemple six.

## [Quelques astuces pour créer les points suivants](#IV32) {#IV32}

Procédez de la même manière pour rajouter 5 autres points de calage. Faites en sorte que ces points soient bien répartis sur l'image.

Pour visualiser les identifiants et/ou les coordonnées des points sur la carte du géoréférenceur : 
 [Menu Paramètres → Configurer le géoréférenceur

![Menu Paramètres, Configurer le géoréférenceur](illustrations/tous/4_3_config_georeferenceur_menu.png)](#thumb) 
 :

[![Fenêtre de configuration du géoréférenceur](illustrations/tous/4_3_config_georeferenceur_fenetre.png)](illustrations/tous/4_3_config_georeferenceur_fenetre.png)

![Icône effacer un point du géoréférenceur](illustrations/tous/4_3_effacer_point_icone.png)Si vous faites une erreur, vous pouvez supprimer un point en cliquant sur l'icône **Effacer un point**, puis sur le point à effacer.

![Icône déplacer un point du géoréférenceur](illustrations/tous/4_3_deplacer_point_icone.png)Vous pouvez également déplacer un point déjà créé en cliquant sur l'icône **Deplacer les points de contrôle**, puis en faisant glisser le point à déplacer.

![Icône sauvegarder les points de contrôle](illustrations/tous/4_3_sauv_points_icone.png)Une fois vos points créés, vous pouvez les sauvegarder au moyen du menu
 [Fichier → Enregistrer les points de contrôle sous...

![Menu Projet, Fichier, Enregistrer les points de contrôle sous...](illustrations/tous/4_3_sauv_points_menu.png)](#thumb) 
 ou bien en cliquant sur l'icône correspondante.

Cette manipulation crée un fichier avec l'extension .POINTS. Par défaut, ce fichier aura le même nom et sera dans le même dossier que l'image que vous êtes en train de caler. Ces points de calage pourront être chargés dans le géoréférenceur au moyen du **menu Fichier → Charger les points de contrôle...**.

Voici à quoi ressemble la fenêtre du géoréférenceur une fois tous les poins de calage correspondant à des intersections du carroyage renseignés :

[![Cartes de Oahu avec le maximum de points de calage renseignés](illustrations/tous/4_3_avec_tous_les_points.png)](illustrations/tous/4_3_avec_tous_les_points.png)

Vous n'êtes pas obligé de renseigner autant de points ! Six suffiront pour notre calage.

Les points qui serviront à caler notre image sont maintenant créés. Comment faire pour utiliser ces points pour caler notre image ?

[chapitre précédent](04_02_preliminaires.html)
[chapitre suivant](04_04_parametrage.html)

[haut de page](#wrap)

:::

```{r, echo=FALSE}
htmltools::includeHTML("toc04.html")
```

:::

